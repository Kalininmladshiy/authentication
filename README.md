# authentication
 
Данный репозиторий представляет собой backend часть сервиса авторизации.

Реализовано 2 REST маршрута:
`api/token/` - выдает пару ключей Access и Refresh
`api/token/refresh/` - обновляет пары токенов

Токены типа JWT, алгоритм SHA512. Хэширование осуществляется в виде bcrypt хеша.  
На данный момент запрос на ручку может осущетвлять любой сторонний сервис (frontend). Если вы хотите это изменить, внесите изменения в файл `settings.py`. Вместо:  
```
CORS_ALLOW_ALL_ORIGINS = True
```
пропишите любой требуемый хост:  
```
CORS_ALLOWED_ORIGINS = [
    "https://example.com",
    "https://sub.example.com",
    "http://localhost:8080",
    "http://127.0.0.1:9000",
]
```
## Используемые технологии:
`Django`
`Django REST`
`JWT`
`Postgresql`

## Установка:

### 1. Копируем содержимое проекта себе в рабочую директорию

### 2. Разворачиваем внутри скопированного проекта виртуальное окружение:
```
python -m venv <название виртуального окружения>
```

### 3. Устанавливаем библиотеки:
```
pip install -r requirements.txt
```

### 4. Для хранения переменных окружения создаем файл .env:
```
touch .env
```
Генерируем секретный ключ DJANGO в интерактивном режиме python:
* `python`
* `import django`
* `from django.core.management.utils import get_random_secret_key`
* `print(get_random_secret_key())`
    
Копируем строку в `.env` файл: `SECRET_KEY='ваш ключ'` и пароль от базы данных `PASS_DB='ваш пароль'`

### 5. Переходим в директорию проекта и выполняем миграции в БД: 
```
python manage.py migrate
```

## Использование:

### 1. Создаем панель администратора:

```
python manage.py createsuperuser
```


### 2. Запускаем сервер:

```
python manage.py runserver
```


### 3. Переходим на http://127.0.0.1:8000/api/token/ , вводим данные зарегистрированного суперюзера, например, и отправляем запрос.  
![изображение](https://user-images.githubusercontent.com/106922768/214841167-f86a5939-68c5-4377-a6c3-e00ed30ca4cd.png)   

Refresh токен обновляется по адресу http://127.0.0.1:8000/api/token/refresh/:  
![изображение](https://user-images.githubusercontent.com/106922768/214841565-e82ecc92-16f2-483a-82d5-9b09bf109d53.png)

## Источники данных

1. Фронтенд получает данные из базы данных Postgresql. Данные вы можете вносить через панель администратора.

## Цели проекта

Код написан в целях выполнения тестового задания компании FFG.
